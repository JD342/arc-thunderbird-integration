/*
~  Copyright (c) 2017 Nicola Fiori (JD342)
~
~  This file is part of the Arc Integration for Thunderbird, licensed under
~  the terms of the GNU General Public License 3.0.
~
*/

@mixin abstract-toolset-btn-icon-styling($active-icon-prefix, $icon-suffix, $icon-prefix, $btn-type, $btn-id) {

    $btn-selector: map_get((
        btn:         '##{ $btn-id }',
        menubtn-btn: '##{ $btn-id } .toolbarbutton-menubutton-button',
        check-btn:   '##{ $btn-id }',
        toggle-btn:  '##{ $btn-id }',
        appmenu-btn: '##{ $btn-id }'
    ), $btn-type);

    $btn-icon-selector: map_get((
        btn:         '.toolbarbutton-icon',
        menubtn-btn: '.toolbarbutton-icon',
        check-btn:   '.toolbarbutton-icon',
        toggle-btn:  '.toolbarbutton-icon',
        appmenu-btn: '.toolbarbutton-icon[label="AppMenu"]'
    ), $btn-type);

    $active-selector: map_get((
        btn:         ':active',
        menubtn-btn: ':active',
        check-btn:   ':-moz-any(:active, [checked="true"])',
        toggle-btn:  ':-moz-any(:active, [open="true"])',
        appmenu-btn: ':-moz-any(:active, [open="true"])'
    ), $btn-type);

    #{ $btn-selector } {

        --ait-toolset-button-icon: #{ '-moz-element(#ait-#{ $icon-prefix }-#{ $icon-suffix }-icon)' };

        &#{ $active-selector } {
            --ait-toolset-button-icon: #{ '-moz-element(#ait-#{ $active-icon-prefix }-#{ $icon-suffix }-icon)' };
        }

        #{ $btn-icon-selector } {
            list-style-image: none;
            background-image: var(--ait-toolset-button-icon);
        }

    }

}

@mixin toolset-btn-icon-styling($btn-type, $btn-id, $icon-name) {
    @include abstract-toolset-btn-icon-styling(
        $active-icon-prefix: 'toolset-active-button',
        $icon-prefix: 'toolset-button',
        $icon-suffix: $icon-name,
        $btn-type: $btn-type,
        $btn-id: $btn-id
    );
}

#{ event-dialog(lightning-event-dialog-frame-icons-styling enabled) },
#{ task-dialog(lightning-task-dialog-frame-icons-styling enabled) } {
    @include toolset-btn-icon-styling(btn, button-save, save);
    @include toolset-btn-icon-styling(btn, button-delete, delete);
    @include toolset-btn-icon-styling(btn, button-attendees, avatar);
    @include toolset-btn-icon-styling(menubtn-btn, button-privacy, lock);
    @include toolset-btn-icon-styling(menubtn-btn, button-freebusy, time);
    @include toolset-btn-icon-styling(check-btn, button-timezones, globe);
    @include toolset-btn-icon-styling(menubtn-btn, button-status, status);
    @include toolset-btn-icon-styling(menubtn-btn, button-url, attachment);
    @include toolset-btn-icon-styling(menubtn-btn, button-priority, important);
}

#{ addr-book-win(address-book-window-frame-icons-styling enabled) } {
    @include toolset-btn-icon-styling(btn, button-newim, message);
    @include toolset-btn-icon-styling(btn, button-abdelete, delete);
    @include toolset-btn-icon-styling(btn, button-newmessage, write);
    @include toolset-btn-icon-styling(btn, button-editcard, properties);
    @include toolset-btn-icon-styling(btn, button-newcard, new-contact);
    @include toolset-btn-icon-styling(btn, button-newlist, address-book);
}

@mixin toolset-btn-icon-styling($btn-type, $btn-id, $icon-name) {

    #{ main-win(main-window-frame-icons-styling enabled) } .toolbox-top {
        @include abstract-toolset-btn-icon-styling(
            $active-icon-prefix: 'toolset-active-button',
            $icon-prefix: 'frame-toolset-button',
            $icon-suffix: $icon-name,
            $btn-type: $btn-type,
            $btn-id: $btn-id
        );
    }

    #{ main-win(panel-toolbox-icons-styling enabled) } .mail-toolbox {
        @include abstract-toolset-btn-icon-styling(
            $active-icon-prefix: 'toolset-active-button',
            $icon-prefix: 'panel-toolset-button',
            $icon-suffix: $icon-name,
            $btn-type: $btn-type,
            $btn-id: $btn-id
        );
    }

}

@include toolset-btn-icon-styling(appmenu-btn, button-appmenu, menu);
@include toolset-btn-icon-styling(appmenu-btn, task-appmenu-button, menu);
@include toolset-btn-icon-styling(appmenu-btn, calendar-appmenu-button, menu);

@include toolset-btn-icon-styling(btn, button-chat, message);
@include toolset-btn-icon-styling(btn, task-print-button, print);
@include toolset-btn-icon-styling(btn, task-newtask-button, new);
@include toolset-btn-icon-styling(btn, task-delete-button, delete);
@include toolset-btn-icon-styling(btn, button-address, address-book);
@include toolset-btn-icon-styling(btn, lightning-button-tasks, task);
@include toolset-btn-icon-styling(btn, calendar-newtask-button, new);
@include toolset-btn-icon-styling(btn, calendar-print-button, print);
@include toolset-btn-icon-styling(btn, task-edit-button, properties);
@include toolset-btn-icon-styling(btn, task-synchronize-button, sync);
@include toolset-btn-icon-styling(btn, calendar-delete-button, delete);
@include toolset-btn-icon-styling(btn, task-newevent-button, schedule);
@include toolset-btn-icon-styling(btn, calendar-edit-button, properties);
@include toolset-btn-icon-styling(btn, calendar-newevent-button, schedule);
@include toolset-btn-icon-styling(btn, calendar-synchronize-button, sync);
@include toolset-btn-icon-styling(btn, lightning-button-calendar, calendar);
@include toolset-btn-icon-styling(btn, calendar-goto-today-button, calendar);

@include toolset-btn-icon-styling(menubtn-btn, button-print, print);
@include toolset-btn-icon-styling(menubtn-btn, button-getmsg, inbox);
@include toolset-btn-icon-styling(menubtn-btn, button-newmsg, write);
@include toolset-btn-icon-styling(menubtn-btn, extractTaskButton, new);
@include toolset-btn-icon-styling(menubtn-btn, extractEventButton, schedule);

@include toolset-btn-icon-styling(toggle-btn, button-tag, tag);

@include toolset-btn-icon-styling(check-btn, qfb-show-filter-bar, filter);
@include toolset-btn-icon-styling(check-btn, calendar-unifinder-button, search);
