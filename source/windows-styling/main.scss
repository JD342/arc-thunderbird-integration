 /*
 ~  Copyright (c) 2017 Nicola Fiori (JD342)
 ~
 ~  This file is part of the Arc Integration for Thunderbird, licensed under
 ~  the terms of the GNU General Public License 3.0.
 ~
 */

@import '../shared-styling/globals';

$actions-box-height: 34px;
$input-border-radius: 3px;
$input-height: 28px;
$input-font-size: 14.37px;
$input-horizontal-padding: 6px;
$actions-box-input-margin: ($actions-box-height - $input-height) / 2;

:root {

    --ait-pixel-ratio: 1;
    @media (min-resolution: 2dppx) { --ait-pixel-ratio: 2; }
    @media (min-resolution: 3dppx) { --ait-pixel-ratio: 3; }
    @media (min-resolution: 4dppx) { --ait-pixel-ratio: 4; }

}

$main-win: ':root#messengerWindow';
$addr-book-win: ':root#addressbookWindow';
$event-dialog: ':root#calendar-event-dialog';
$task-dialog: ':root#calendar-task-dialog';

$main-win-calendar-panel: '#{ $main-win }  #calendar-toolbox-container:not([collapsed="true"]) ~ #calendarContent';
$main-win-tasks-panel: '#{ $main-win }  #task-toolbox-container:not([collapsed="true"]) ~ #calendarContent';
$main-win-side-panel: '#{ $main-win } #today-pane-panel';
$main-win-mails-panel: '#{ $main-win } #messengerBox';

@function pref($args...) {
    // pref(foo light)      -> [ait-foo-preference="light"]
    // pref(foo a, baz b)   -> [ait-foo-preference="a"][ait-baz-preference="b"]
    // pref(foo dark light) -> :-moz-any([ait-foo-preference="dark"], [ait-foo-preference="light"])
    // pref(foo a, baz b c) -> [ait-foo-preference="a"]:-moz-any([ait-baz-preference="b"], [ait-baz-preference="c"])
    $result: '';
    @each $arg in $args {
        @if length($arg) < 2 {
            @error 'not enough items in param "#{ $arg }" (args: #{ $args })';
        }
        $name: nth($arg, 1);
        $list: ();
        @for $i from 2 through length($arg) {
            $value: nth($arg, $i);
            $list: append($list, '[ait-#{ $name }-preference="#{ $value }"]');
        }
        $result: $result + if(length($list) == 1, nth($list, 1), ':-moz-any(#{ zip($list) })');
    }
    @return $result;
}

@function main-win($args...)                { @return pref($args...) + $main-win; }
@function task-dialog($args...)             { @return pref($args...) + $task-dialog; }
@function event-dialog($args...)            { @return pref($args...) + $event-dialog; }
@function addr-book-win($args...)           { @return pref($args...) + $addr-book-win; }
@function main-win-side-panel($args...)     { @return pref($args...) + $main-win-side-panel; }
@function main-win-mails-panel($args...)    { @return pref($args...) + $main-win-mails-panel; }
@function main-win-tasks-panel($args...)    { @return pref($args...) + $main-win-tasks-panel; }
@function main-win-calendar-panel($args...) { @return pref($args...) + $main-win-calendar-panel; }

@import 'borders';
@import 'frame';
@import 'tabs-and-toolbox-common';
@import 'tabs';
@import 'toolbox-box';
@import 'toolsets';
@import 'textboxes';
@import 'panels-common';
@import 'panel-mails';
@import 'panel-calendar';
@import 'panel-tasks';
@import 'panel-side';
