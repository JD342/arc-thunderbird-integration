 /*
 ~  Copyright (c) 2017 Nicola Fiori (JD342)
 ~
 ~  This file is part of the Arc Integration for Thunderbird, licensed under
 ~  the terms of the GNU General Public License 3.0.
 ~
 */

/* -- general --------------------------------------------------------------- */

:root {

    /* color palette */

    --ait-blue: #5294e2;
    --ait-red: #f37076;

    --ait-button-active-text-color: #ffffff;

    --ait-light-window-frame-background-color: #e7e8eb;
    --ait-light-pane-background-color: #f5f6f7;
    --ait-light-pane-border-color: #d2d3d8;
    --ait-light-side-pane-background-color: #fbfbfc;
    --ait-light-content-background-color: #ffffff;
    --ait-light-content-border-color: #dcdfe3;
    --ait-light-input-border-color: #cfd6e6;
    --ait-light-input-placeholder-color: #a7aab0;
    --ait-light-text-input-icon-color: #7d8189;
    --ait-light-button-background-color: #fbfbfc;
    --ait-light-button-hover-background-color: #ffffff;
    --ait-light-text-color: #5c616c;
    --ait-light-actions-box-background-color: #edeef0;

    --ait-dark-window-frame-background-color: #2f343f;
    --ait-dark-pane-background-color: #383c4a;
    --ait-dark-pane-border-color: #252a33;
    --ait-dark-side-pane-background-color: #3c4150;
    --ait-dark-content-background-color: #404552;
    --ait-dark-content-border-color: #2b2e39;
    --ait-dark-input-border-color: #2b2e39;
    --ait-dark-input-placeholder-color: #8e95a0;
    --ait-dark-text-input-icon-color: #b6bcc6;
    --ait-dark-button-background-color: #444a58;
    --ait-dark-button-hover-background-color: #505666;
    --ait-dark-text-color: #d3dae3;
    --ait-dark-actions-box-background-color: #313541;

    /* dimensions */

    --ait-actions-box-height: 34px;
    --ait-input-border-radius: 3px;
    --ait-input-height: 28px;
    --ait-input-font-size: 14.37px;
    --ait-input-horizontal-padding: 6px;

    --ait-pixel-ratio: 1;

    @media (min-resolution: 2dppx) { --ait-pixel-ratio: 2; }
    @media (min-resolution: 3dppx) { --ait-pixel-ratio: 3; }
    @media (min-resolution: 4dppx) { --ait-pixel-ratio: 4; }

    /* computed values */

    --ait-actions-box-input-margin: calc((var(--ait-actions-box-height) -
                                          var(--ait-input-height)) / 2);
    --ait-input-text-vertical-spacing: calc((var(--ait-input-height) -
                                             var(--ait-input-font-size)) / 2);

}

/* -- icons ----------------------------------------------------------------- */

:root {

    &#messengerWindow[ait-frame-contents-preference="light"]
        svg:-moz-any([id|="ait-frame-toolset-button"], [id|="ait-tab-close"]),
    &#messengerWindow:-moz-any([ait-main-toolbox-preference="light"],
                               [ait-main-toolbox-preference="darker"])
        svg:-moz-any([id|="ait-selected-tab-close"],
                     [id|="ait-pane-toolset-button"]),
    &:-moz-any(#calendar-event-dialog,
               #calendar-task-dialog,
               #addressbookWindow)[ait-frame-contents-preference="light"]
        svg[id|="ait-toolset-button"],
    &#messengerWindow[ait-lightning-side-pane-preference="light"]
        svg[id|="ait-lightning-side-pane"]
    &#messengerWindow[ait-lightning-main-view-preference="light"]
        svg[id|="ait-lightning-main-view"] {

        --ait-icon-color: var(--ait-light-text-color);

    }

    &#messengerWindow[ait-frame-contents-preference="dark"]
        svg:-moz-any([id|="ait-frame-toolset-button"], [id|="ait-tab-close"]),
    &#messengerWindow[ait-main-toolbox-preference="dark"]
        svg:-moz-any([id|="ait-selected-tab-close"],
                     [id|="ait-pane-toolset-button"]),
    &:-moz-any(#calendar-event-dialog,
               #calendar-task-dialog,
               #addressbookWindow)[ait-frame-contents-preference="dark"]
        svg[id|="ait-toolset-button"],
    &#messengerWindow[ait-lightning-side-pane-preference="dark"]
        svg[id|="ait-lightning-side-pane"],
    &#messengerWindow[ait-lightning-main-view-preference="dark"]
        svg[id|="ait-lightning-main-view"] {

        --ait-icon-color: var(--ait-dark-text-color);

    }

    &#messengerWindow[ait-lightning-main-view-preference="light"]
        svg[id|="ait-lightning-main-view-searhcbox"],
    &#messengerWindow[ait-frame-contents-preference="light"]
        svg[id|="ait-frame-toolset-searchbox"],
    &#messengerWindow:-moz-any([ait-main-toolbox-preference="light"],
                               [ait-main-toolbox-preference="darker"])
        svg[id|="ait-pane-toolset-searchbox"],
    &#messengerWindow[ait-mails-main-view-preference="light"]
        svg[id|="ait-mails-view-searchbox"],
    &#addressbookWindow[ait-frame-contents-preference="light"]
        svg[id|="ait-toolset-searchbox"] {

        --ait-icon-color: var(--ait-light-text-input-icon-color);

    }

    &#messengerWindow[ait-lightning-main-view-preference="dark"]
        svg[id|="ait-lightning-main-view-searhcbox"],
    &#messengerWindow[ait-frame-contents-preference="dark"]
        svg[id|="ait-frame-toolset-searchbox"],
    &#messengerWindow[ait-main-toolbox-preference="dark"]
        svg[id|="ait-pane-toolset-searchbox"],
    &#messengerWindow[ait-mails-main-view-preference="dark"]
        svg[id|="ait-mails-view-searchbox"],
    &#addressbookWindow[ait-frame-contents-preference="dark"]
        svg[id|="ait-toolset-searchbox"] {

        --ait-icon-color: var(--ait-dark-text-input-icon-color);

    }

    &#messengerWindow svg {

        &[id|="ait-tab-hover-button-close"] {

            --ait-icon-color: var(--ait-red);

        }

        &[id|="ait-tab-active-button-close"] {

            --ait-icon-color: var(--ait-blue);

        }

        &:-moz-any([id|="ait-toolset-active-button"],
                   [id|="ait-frame-toolset-button"],
                   [id|="ait-pane-toolset-button"]) {

            &[id$="schedule-icon"] {

                transform: translateY(-1px);

            }

            &[id$="filter-icon"] {

                transform: scale(1.25, 1.25);

            }

        }

    }

    &:-moz-any(#calendar-event-dialog,
               #calendar-task-dialog,
               #addressbookWindow,
               #messengerWindow) svg[id|="ait-toolset-active-button"] {

        --ait-icon-color: var(--ait-button-active-text-color) !important;

    }


    &#addressbookWindow
        svg:-moz-any([id|="ait-toolset-active-button"],
                     [id|="ait-toolset-button"])[id$="write-icon"],
    &#messengerWindow svg:-moz-any(
        [id|="ait-toolset-active-button"],
        [id|="ait-frame-toolset-button"],
        [id|="ait-pane-toolset-button"]
    ):-moz-any([id$="filter-icon"], [id$="write-icon"]) {

        & path {

            stroke: var(--ait-icon-color);
            stroke-width: 0.8px;

        }

    }

}

svg[id|="ait"] {

    width: 16px;
    height: 16px;

    & :-moz-any(path, rect) {

        fill: var(--ait-icon-color);

    }

}

/* -- generic tweaks -------------------------------------------------------- */

:root#messengerWindow {

    &:not([ait-main-toolbox-preference="none"]) #contentTabBrowser0 {

        /* puts content windows (for ex. Add-ons Manager) on top to hide
           artifacts from the tab browser  */

        z-index: 2;
        position: relative;

    }

}

/* -- borders, separators & splitters --------------------------------------- */

:root {

    &#messengerWindow[ait-mails-main-view-preference="light"] #messengerBox,
    &#addressbookWindow[ait-dialogs-content-preference="light"] #abContent {

        --ait-border-color: var(--ait-light-content-border-color);

    }

    &#messengerWindow[ait-mails-main-view-preference="dark"] #messengerBox,
    &#addressbookWindow[ait-dialogs-content-preference="dark"] #abContent{

        --ait-border-color: var(--ait-dark-content-border-color);

    }

    &#messengerWindow[ait-lightning-side-pane-preference="light"]
        :-moz-any(#today-splitter, #today-pane-panel),
    &#messengerWindow[ait-lightning-main-view-preference="light"]
        #calendarContent {

        --ait-border-color: var(--ait-light-pane-border-color);

    }

    &#messengerWindow[ait-lightning-side-pane-preference="dark"]
        :-moz-any(#today-splitter, #today-pane-panel),
    &#messengerWindow[ait-lightning-main-view-preference="dark"]
        #calendarContent {

        --ait-border-color: var(--ait-dark-pane-border-color);

    }

    &#messengerWindow:not([ait-lightning-main-view-preference="none"])
        #calendarContent splitter,
    &#messengerWindow:not([ait-lightning-side-pane-preference="none"])
        #today-splitter,
    &#messengerWindow:not([ait-mails-main-view-preference="none"]) #messengerBox
        splitter,
    &#addressbookWindow:not([ait-dialogs-content-preference="none"]) #abContent
        splitter {

        transition: border-color 300ms ease !important;
        border-color: var(--ait-border-color) !important;
        border-inline-end-color: var(--ait-border-color);
        border-inline-start-color: var(--ait-border-color);

        &:hover {

            border-color: var(--ait-blue) !important;

        }

    }

    &#messengerWindow:not([ait-mails-main-view-preference="none"])
        :-moz-any(#quick-filter-bar, #folderTree, #messagepanebox),
    &#messengerWindow:not([ait-lightning-main-view-preference="none"])
        #ltnSidebar,
    &#messengerWindow:not([ait-lightning-side-pane-preference="none"])
        #today-pane-panel {

        border-bottom-color: var(--ait-border-color);

    }

}

/* -- frame styling --------------------------------------------------------- */

:root {

    &[ait-frame-background-preference="light"] {

        --ait-frame-background-color:
            var(--ait-light-window-frame-background-color);

    }

    &[ait-frame-background-preference="dark"] {

        --ait-frame-background-color:
            var(--ait-dark-window-frame-background-color);

    }

    &:not([ait-frame-background-preference="none"]) {

        &:-moz-any(#calendar-event-dialog,
                   #calendar-task-dialog,
                   #addressbookWindow,
                   #messengerWindow) .toolbox-top > * {

            -moz-appearance: none;
            background: var(--ait-frame-background-color) !important;

        }

    }

    &:-moz-any(#calendar-event-dialog,
               #calendar-task-dialog,
               #addressbookWindow) {

        &[ait-frame-background-preference="light"] {

            --ait-frame-lower-border-color:
                var(--ait-light-pane-border-color);

        }

        &[ait-frame-background-preference="dark"] {

            --ait-frame-lower-border-color:
                var(--ait-dark-pane-border-color);

        }

        &:not([ait-frame-background-preference="none"]) .toolbox-top::after {

            content: "";
            display: block;
            height: 1px;
            width: 100%;
            background: var(--ait-frame-lower-border-color);

        }


    }

}

/* -- toolbox content styling ----------------------------------------------- */

:root {

    --ait-toolbox-items-margin: 5px;

    &:-moz-any(#calendar-event-dialog, #calendar-task-dialog) {

        --ait-toolset-button-down-arrow-icon:
            -moz-element(~"#ait-toolset-button-down-arrow-icon");

    }

    &#messengerWindow {

        &.toolbox-top {

            --ait-toolset-button-down-arrow-icon:
                -moz-element(~"#ait-frame-toolset-button-down-arrow-icon");

        }

        & .mail-toolbox {

            --ait-toolset-button-down-arrow-icon:
                -moz-element(~"#ait-pane-toolset-button-down-arrow-icon");

        }

    }

    &:-moz-any(#calendar-event-dialog,
               #calendar-task-dialog,
               #messengerWindow) {

        --ait-toolset-active-button-down-arrow-icon:
            -moz-element(~"#ait-toolset-active-button-down-arrow-icon");

    }

    &:-moz-any(#calendar-event-dialog,
               #calendar-task-dialog,
               #addressbookWindow)[ait-frame-contents-preference="light"],
    &#messengerWindow[ait-frame-contents-preference="light"]
        .toolbox-top .chromeclass-menubar,
    &#messengerWindow:-moz-any([ait-main-toolbox-preference="light"],
                               [ait-main-toolbox-preference="darker"])
        .mail-toolbox {

        --ait-toolbox-text-color: var(--ait-light-text-color);
        --ait-toolbox-button-active-border-color: var(--ait-blue);
        --ait-toolbox-border-color: var(--ait-light-pane-border-color);
        --ait-toolbox-button-border-color: var(--ait-light-input-border-color);

        --ait-toolbox-button-background-color:
            var(--ait-light-button-background-color);

        --ait-toolbox-button-hover-background-color:
            var(--ait-light-button-hover-background-color);

    }

    &:-moz-any(#calendar-event-dialog,
               #calendar-task-dialog,
               #addressbookWindow)[ait-frame-contents-preference="dark"],
    &#messengerWindow[ait-main-toolbox-preference="dark"] .mail-toolbox,
    &#messengerWindow[ait-frame-contents-preference="dark"]
        .toolbox-top .chromeclass-menubar {

        --ait-toolbox-text-color: var(--ait-dark-text-color);
        --ait-toolbox-border-color: var(--ait-dark-pane-border-color);
        --ait-toolbox-button-border-color: var(--ait-dark-input-border-color);

        --ait-toolbox-button-active-border-color:
            var(--ait-dark-input-border-color);

        --ait-toolbox-button-background-color:
            var(--ait-dark-button-background-color);

        --ait-toolbox-button-hover-background-color:
            var(--ait-dark-button-hover-background-color);

    }

    &#messengerWindow:not([ait-main-toolbox-preference="none"]) .mail-toolbox,
    &#messengerWindow:not([ait-frame-contents-preference="none"])
        .toolbox-top .chromeclass-menubar,
    &:-moz-any(#calendar-event-dialog,
               #calendar-task-dialog,
               #addressbookWindow):not([ait-frame-contents-preference="none"])
        .toolbox-top {

        & toolbarseparator {

            min-width: 1px;
            min-height: 100%;
            -moz-appearance: none !important;
            background: var(--ait-toolbox-border-color);
            margin: 0 calc(var(--ait-toolbox-items-margin) / 2);

        }

        & dropmarker {

            -moz-appearance: none;

        }

        & .toolbarbutton-text {

            font-size: 0.96em;
            margin: 0 2px !important;
            transition: color 200ms ease-out;
            color: var(--ait-toolbox-text-color);

        }

        & .toolbarbutton-icon {

            margin: 2px;
            width: 16px;
            height: 16px;
            background-size: contain;
            background-repeat: no-repeat;

        }

        & .dropmarker-icon {

            margin: 0 4px;
            background-size: 16px 16px;
            background-image: var(--ait-toolset-button-down-arrow-icon);


        }

        & .toolbarbutton-1 {

            background: none;
            box-shadow: none;
            min-height: var(--ait-input-height);
            border-radius: var(--ait-input-border-radius);
            margin: 0 calc(var(--ait-toolbox-items-margin) / 2);
            transition: background 200ms ease-out, border-color 200ms ease-out;

            &[type="menu-button"],
            &:not([disabled="true"]):hover {

                background: var(--ait-toolbox-button-background-color);

            }

            &[type="menu-button"] dropmarker,
            &[type="menu"] {

                &[open="true"] .dropmarker-icon {

                    background-image:
                        var(--ait-toolset-active-button-down-arrow-icon);

                }

            }

            &:not([type="menu-button"]):not(.toolbarbutton-menubutton-button) {

                &:not([disabled="true"]) {

                    &:hover {

                        border-color: var(--ait-toolbox-button-border-color);
                        background: var(--ait-toolbox-button-background-color);

                    }

                    &:-moz-any(:active, [open="true"], [checked="true"]) {

                        transition: none;
                        background: var(--ait-blue);

                        border-color:
                            var(--ait-toolbox-button-active-border-color);

                        & .toolbarbutton-text {

                            transition: none;
                            color: var(--ait-button-active-text-color);

                        }

                    }

                }

            }

            &[type="menu-button"] {

                border: none;

                & dropmarker::before {

                    display: none;

                }

                & .toolbarbutton-menubutton-button:active .toolbarbutton-text {

                    color: var(--ait-button-active-text-color);

                }

                & :-moz-any(.toolbarbutton-menubutton-button,
                            .toolbarbutton-menubutton-dropmarker) {

                    border: none;
                    background: rgba(0,0,0,0);
                    box-shadow: none;
                    border-top: 1px solid
                                var(--ait-toolbox-button-border-color);
                    border-bottom: 1px solid
                                   var(--ait-toolbox-button-border-color);

                }

                & .toolbarbutton-menubutton-button {

                    transition: background 300ms ease;
                    border-top-left-radius: var(--ait-input-border-radius);
                    border-bottom-left-radius: var(--ait-input-border-radius);
                    border-left: 1px solid
                                 var(--ait-toolbox-button-border-color);
                    padding-right: calc(var(--ait-input-horizontal-padding) +
                                        1px);

                }

                & .toolbarbutton-menubutton-dropmarker {

                    z-index: 2;
                    padding: 0 2px;
                    position: relative;
                    background: none;
                    box-shadow: -1px 0 rgba(0,0,0,0);
                    border-top-right-radius: var(--ait-input-border-radius);
                    border-bottom-right-radius: var(--ait-input-border-radius);
                    transition: background 300ms ease,
                                box-shadow 300ms ease;
                    border-right: 1px solid
                                  var(--ait-toolbox-button-border-color);

                }

                &:hover .toolbarbutton-menubutton-dropmarker {

                    box-shadow: -1px 0 var(--ait-toolbox-button-border-color);

                }

                &:not(:active) .toolbarbutton-menubutton-button:hover,
                &:not([open="true"]):hover
                    .toolbarbutton-menubutton-button:not(:hover) +
                        .toolbarbutton-menubutton-dropmarker {

                    background:
                        var(--ait-toolbox-button-hover-background-color);

                }

                & :-moz-any(.toolbarbutton-menubutton-button:active,
                            .toolbarbutton-menubutton-dropmarker[open="true"]) {

                    transition: none !important;
                    background: var(--ait-blue) !important;
                    border-color: var(--ait-toolbox-button-active-border-color)
                                  !important;

                }

            }

        }

    }

}

/* -- tabs and toolbox common ----------------------------------------------- */

:root#messengerWindow {

    &:-moz-any([ait-main-toolbox-preference="light"],
               [ait-main-toolbox-preference="darker"]) {

        --ait-tab-and-toolbox-border-color:
            var(--ait-light-pane-border-color);

        --ait-tab-and-toolbox-background-color:
            var(--ait-light-pane-background-color);

    }

    &[ait-main-toolbox-preference="light"] {

        --ait-tab-hover-background-opacity: 0.6;

        --ait-tab-and-toolbox-upper-border-color:
            var(--ait-light-pane-border-color);

    }

    &[ait-main-toolbox-preference="darker"] {

        --ait-tab-hover-background-opacity: 0.25;

        --ait-tab-and-toolbox-upper-border-color:
            var(--ait-dark-pane-border-color);

    }

    &[ait-main-toolbox-preference="dark"] {

        --ait-tab-hover-background-opacity: 0.6;

        --ait-tab-and-toolbox-border-color:
            var(--ait-dark-pane-border-color);

        --ait-tab-and-toolbox-upper-border-color:
            var(--ait-dark-pane-border-color);

        --ait-tab-and-toolbox-background-color:
            var(--ait-dark-pane-background-color);

        --ait-toolbox-button-background-hover-color:
            var(--ait-dark-button-hover-background-color);

    }

}

/* -- tabs styling & side icons --------------------------------------------- */

:root#messengerWindow {

    &:not([ait-frame-contents-preference="none"]) {

        & :-moz-any(#calendar-tab-button,
                    #task-tab-button) .toolbarbutton-icon {

            width: 16px !important;
            height: 16px !important;
            list-style-image: none !important;

        }

        & #calendar-tab-button .toolbarbutton-icon {

            background-image:
                -moz-element(~"#ait-frame-toolset-button-calendar-icon");

        }

        & #task-tab-button .toolbarbutton-icon {

            background-image:
                -moz-element(~"#ait-frame-toolset-button-task-icon");

        }

    }

    &:not([ait-main-toolbox-preference="none"]) {

        --ait-tab-border-radius: 1.1px;

        & #appmenuSecondaryPane {

            border-color: var(--ait-border-color);
            background: var(--ait-side-pane-background-color);

        }

        & #tabs-toolbar {

            padding-top: 1px;
            margin-left: -10px;
            position: relative;
            box-shadow: inset 0 -1px
                        var(--ait-tab-and-toolbox-upper-border-color);

            & .tab-background {

                background: none !important;

                &::after {

                    left: 0;
                    bottom: 0;
                    content: "";
                    width: 100%;
                    height: 1px;
                    display: block;
                    position: absolute;

                    box-shadow:
                        2px 0 var(--ait-tab-and-toolbox-background-color),
                        -2px 0 var(--ait-tab-and-toolbox-background-color);

                }

            }

            & :-moz-any(.tab-background-start,
                        .tab-background-middle,
                        .tab-background-end) {

                overflow: hidden;
                margin-bottom: -1px;
                opacity: 0 !important;
                height: 10px !important;

            }

            & .tab-background-middle {

                border: none;
                margin-top: 1px;
                border-top-left-radius: var(--ait-tab-border-radius);
                border-top-right-radius: var(--ait-tab-border-radius);
                background: var(--ait-tab-and-toolbox-background-color)
                            !important;

                box-shadow:
                    0 0 0 1px
                    var(--ait-tab-and-toolbox-upper-border-color);

                &[selected="true"] {

                    opacity: 1 !important;

                }

            }

            & .tabmail-tab {

                &::before {

                    display: none;

                }

                &[selected="true"] .tab-close-button {

                    background-image:
                        -moz-element(~"#ait-selected-tab-close-icon")
                        !important;

                }

                &:hover:not([selected="true"]) .tab-background-middle {

                    position: relative;
                    opacity: 1 !important;
                    padding: 0 !important;
                    background: none !important;

                    &::before {

                        top: 0;
                        left: 0;
                        content: "";
                        width: 100%;
                        display: block;
                        position: absolute;
                        height: calc(100% - 3px);
                        opacity: var(--ait-tab-hover-background-opacity);

                        background:
                            var(--ait-tab-and-toolbox-background-color);

                    }

                }

            }

            & .tab-close-button {

                position: relative;
                background-image: -moz-element(~"#ait-tab-close-icon")
                                  !important;

                &::before {

                    opacity: 0;
                    content: "";
                    width: 16px;
                    height: 16px;
                    display: block;
                    pointer-events: none;
                    transition: opacity 300ms ease;

                    background-image:
                        -moz-element(~"#ait-tab-hover-button-close-icon");

                }

                & image {

                    display: none;

                }

                &:hover::before {

                    opacity: 1;

                }

                &:active::before {

                    background-image:
                        -moz-element(~"#ait-tab-active-button-close-icon");

                }

            }

        }

        &:not([ait-frame-contents-preference="none"])
            :-moz-any(#calendar-tab-button, #task-tab-button) {

            width: 36px;
            height: 27px;
            margin-top: 0;
            border-radius: 0;
            transition: none;
            border-bottom: none;
            box-shadow: none !important;
            border: 1px solid rgba(0,0,0,0);
            border-top-left-radius: var(--ait-tab-border-radius);
            border-top-right-radius: var(--ait-tab-border-radius);

            &:hover {

                background: var(--ait-tab-and-toolbox-hover-color)
                            !important;
                border-color: var(--ait-tab-and-toolbox-upper-border-color)
                              !important;

                &::before {

                    content: "";
                    width: 34px;
                    height: 27px;
                    display: block;
                    position: absolute;
                    transform: translate(-6px, -50%);
                    opacity: var(--ait-tab-hover-background-opacity);
                    background: var(--ait-tab-and-toolbox-background-color);

                }

            }

            & .toolbarbutton-icon {

                position: relative;

            }


        }

    }

}

/* -- toolbox styling ------------------------------------------------------- */

:root#messengerWindow:not([ait-main-toolbox-preference="none"]) {

    --ait-toolbox-height: 36px;
    --ait-toolbox-items-margin: 5px;

    & .mail-toolbox {

        display: flex;
        flex-flow: column;
        box-shadow: none !important;
        background: var(--ait-tab-and-toolbox-background-color) !important;

        &::after {

            background-color: var(--ait-tab-and-toolbox-border-color)
                              !important;

        }

        & > toolbar {

            display: flex;
            flex-flow: row;
            position: relative;
            align-items: center;
            -moz-appearance: none;
            min-height: var(--ait-toolbox-height);
            margin: 0 calc(var(--ait-toolbox-items-margin) / 2) !important;

            & > * {

                flex-shrink: 0;

            }

        }

        & :-moz-any(toolbarspring, toolbarpaletteitem[type="spring"]) {

            flex: 1 1;
            height: 100%;

        }

    }

}

/* -- toolbox icons --------------------------------------------------------- */

:root {

    &:not([ait-frame-contents-preference="none"]) {

        &:-moz-any(#calendar-event-dialog, #calendar-task-dialog) {

            & #button-priority .toolbarbutton-menubutton-button {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-button-important-icon");

                &:active {

                    --ait-toolset-button-icon:
                        -moz-element(
                            ~"#ait-toolset-active-button-important-icon"
                        );

                }

            }

            & #button-freebusy .toolbarbutton-menubutton-button {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-button-time-icon");

                &:active {

                    --ait-toolset-button-icon:
                        -moz-element(~"#ait-toolset-active-button-time-icon");

                }

            }

            & #button-privacy .toolbarbutton-menubutton-button {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-button-lock-icon");

                &:active {

                    --ait-toolset-button-icon:
                        -moz-element(~"#ait-toolset-active-button-lock-icon");

                }

            }

            & #button-status .toolbarbutton-menubutton-button {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-button-status-icon");

                &:active {

                    --ait-toolset-button-icon:
                        -moz-element(~"#ait-toolset-active-button-status-icon");

                }

            }

            & #button-url .toolbarbutton-menubutton-button {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-button-attachment-icon");

                &:active {

                    --ait-toolset-button-icon:
                        -moz-element(
                            ~"#ait-toolset-active-button-attachment-icon"
                        );

                }

            }

            & #button-timezones {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-button-globe-icon");

                &:-moz-any(:active, [checked="true"]) {

                    --ait-toolset-button-icon:
                        -moz-element(~"#ait-toolset-active-button-globe-icon");

                }

            }

            & #button-attendees {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-button-avatar-icon");

                &:active {

                    --ait-toolset-button-icon:
                        -moz-element(~"#ait-toolset-active-button-avatar-icon");

                }

            }

            & #button-delete {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-button-delete-icon");

                &:active {

                    --ait-toolset-button-icon:
                        -moz-element(~"#ait-toolset-active-button-delete-icon");

                }

            }

            & #button-save {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-button-save-icon");

                &:active {

                    --ait-toolset-button-icon:
                        -moz-element(~"#ait-toolset-active-button-save-icon");

                }

            }


        }

        &#addressbookWindow {

            & #button-newmessage {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-button-write-icon");

                &:active {

                    --ait-toolset-button-icon:
                        -moz-element(~"#ait-toolset-active-button-write-icon");

                }

            }

            & #button-editcard {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-button-properties-icon");

                &:active {

                    --ait-toolset-button-icon:
                        -moz-element(
                            ~"#ait-toolset-active-button-properties-icon"
                        );

                }

            }

            & #button-abdelete {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-button-delete-icon");

                &:active {

                    --ait-toolset-button-icon:
                        -moz-element(~"#ait-toolset-active-button-delete-icon");

                }

            }

            & #button-newcard {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-button-new-contact-icon");

                &:active {

                    --ait-toolset-button-icon:
                        -moz-element(
                            ~"#ait-toolset-active-button-new-contact-icon"
                        );

                }

            }

            & #button-newlist {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-button-address-book-icon");

                &:active {

                    --ait-toolset-button-icon:
                        -moz-element(
                            ~"#ait-toolset-active-button-address-book-icon"
                        );

                }

            }

            & #button-newim {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-button-message-icon");

                &:active {

                    --ait-toolset-button-icon:
                        -moz-element(~"#ait-toolset-active-button-message-icon");

                }

            }

        }

        &:-moz-any(#calendar-event-dialog,
                   #calendar-task-dialog)
            :-moz-any(#button-priority,
                      #button-freebusy,
                      #button-privacy,
                      #button-status,
                      #button-url) .toolbarbutton-menubutton-button,
        &:-moz-any(#calendar-event-dialog,
                   #calendar-task-dialog) :-moz-any(#button-timezones,
                                                    #button-attendees,
                                                    #button-delete,
                                                    #button-save),
        &#addressbookWindow :-moz-any(#button-newmessage,
                                      #button-editcard,
                                      #button-abdelete,
                                      #button-newcard,
                                      #button-newlist,
                                      #button-newim) {

            & .toolbarbutton-icon {

                list-style-image: none;
                background-image: var(--ait-toolset-button-icon);

            }

        }

    }

    &#messengerWindow {

        &:not([ait-frame-contents-preference="none"]) .toolbox-top {

            & :-moz-any(#calendar-newevent-button, #task-newevent-button),
            & #extractEventButton .toolbarbutton-menubutton-button {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-frame-toolset-button-schedule-icon");

            }

            & :-moz-any(#calendar-newtask-button, #task-newtask-button),
            & #extractTaskButton .toolbarbutton-menubutton-button {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-frame-toolset-button-new-icon");

            }

            & #button-getmsg .toolbarbutton-menubutton-button {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-frame-toolset-button-inbox-icon");

            }

            & #button-newmsg .toolbarbutton-menubutton-button {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-frame-toolset-button-write-icon");

            }

            & :-moz-any(#calendar-print-button, #task-print-button),
            & #button-print .toolbarbutton-menubutton-button {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-frame-toolset-button-printer-icon");

            }

            & .button-appmenu {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-menu-icon");

            }

            & :-moz-any(#calendar-synchronize-button,
                        #task-synchronize-button) {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-frame-toolset-button-sync-icon");

            }

            & :-moz-any(#calendar-goto-today-button,
                        #lightning-button-calendar) {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-frame-toolset-button-calendar-icon");

            }

            & :-moz-any(#calendar-delete-button, #task-delete-button) {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-delete-icon");


            }

            & :-moz-any(#calendar-edit-button, #task-edit-button) {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-frame-toolset-button-properties-icon");

            }

            & #calendar-unifinder-button {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-frame-toolset-button-search-icon");

            }

            & #lightning-button-tasks {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-frame-toolset-button-task-icon");

            }

            & #qfb-show-filter-bar {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-frame-toolset-button-filter-icon");

            }

            & #button-address {

                --ait-toolset-button-icon:
                    -moz-element(
                        ~"#ait-frame-toolset-button-address-book-icon"
                    );

            }

            & #button-chat {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-frame-toolset-button-message-icon");

            }

            & #button-tag {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-frame-toolset-button-tag-icon");

            }

        }

        &:not([ait-main-toolbox-preference="none"]) .mail-toolbox {

            & :-moz-any(#calendar-newevent-button, #task-newevent-button),
            & #extractEventButton .toolbarbutton-menubutton-button {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-schedule-icon");

            }

            & :-moz-any(#calendar-newtask-button, #task-newtask-button),
            & #extractTaskButton .toolbarbutton-menubutton-button {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-new-icon");

            }

            & #button-getmsg .toolbarbutton-menubutton-button {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-inbox-icon");

            }

            & #button-newmsg .toolbarbutton-menubutton-button {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-write-icon");

            }

            & :-moz-any(#calendar-print-button, #task-print-button),
            & #button-print .toolbarbutton-menubutton-button {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-printer-icon");

            }

            & .button-appmenu {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-menu-icon");

            }

            & :-moz-any(#calendar-goto-today-button,
                        #lightning-button-calendar) {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-calendar-icon");

            }

            & :-moz-any(#calendar-synchronize-button,
                        #task-synchronize-button) {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-sync-icon");

            }

            & :-moz-any(#calendar-delete-button, #task-delete-button) {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-delete-icon");

            }

            & :-moz-any(#calendar-edit-button, #task-edit-button) {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-properties-icon");

            }

            & #calendar-unifinder-button {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-search-icon");

            }

            & #lightning-button-tasks {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-task-icon");

            }

            & #qfb-show-filter-bar {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-filter-icon");

            }

            & #button-address {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-address-book-icon");

            }

            & #button-chat {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-message-icon");

            }

            & #button-tag {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-pane-toolset-button-tag-icon");

            }

        }

        &:not([ait-frame-contents-preference="none"]) .toolbox-top,
        &:not([ait-main-toolbox-preference="none"]) .mail-toolbox {

            & :-moz-any(#calendar-newevent-button, #task-newevent-button),
            & #extractEventButton .toolbarbutton-menubutton-button {

                &:active {

                    --ait-toolset-button-icon:
                        -moz-element(
                            ~"#ait-toolset-active-button-schedule-icon"
                        );

                }

            }

            & :-moz-any(#calendar-newtask-button, #task-newtask-button),
            & #extractTaskButton .toolbarbutton-menubutton-button {

                &:active {

                    --ait-toolset-button-icon:
                        -moz-element(~"#ait-toolset-active-button-new-icon");

                }

            }

            & #button-getmsg .toolbarbutton-menubutton-button:active {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-active-button-inbox-icon");

            }

            & #button-newmsg .toolbarbutton-menubutton-button:active {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-active-button-write-icon");

            }

            & :-moz-any(#calendar-print-button, #task-print-button),
            & #button-print .toolbarbutton-menubutton-button {

                &:active {

                    --ait-toolset-button-icon:
                        -moz-element(
                             ~"#ait-toolset-active-button-printer-icon"
                         );

                }

            }

            & .button-appmenu:-moz-any([open="true"], :active) {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-active-button-menu-icon");

            }

            & :-moz-any(#calendar-goto-today-button,
                        #lightning-button-calendar):active {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-active-button-calendar-icon");

            }

            & :-moz-any(#calendar-synchronize-button,
                        #task-synchronize-button):active {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-active-button-sync-icon");

            }

            & :-moz-any(#calendar-delete-button, #task-delete-button):active {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-active-button-delete-icon");

            }

            & :-moz-any(#calendar-edit-button, #task-edit-button):active {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-active-button-properties-icon");

            }

            & #calendar-unifinder-button:-moz-any([checked="true"], :active) {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-active-button-search-icon");

            }

            & #lightning-button-tasks:active {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-active-button-task-icon");

            }

            & #qfb-show-filter-bar:-moz-any([checked="true"], :active) {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-active-button-filter-icon");

            }

            & #button-address:active {

                --ait-toolset-button-icon:
                    -moz-element(
                        ~"#ait-toolset-active-button-address-book-icon"
                    );

            }

            & #button-chat:active {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-active-button-message-icon");

            }

            & #button-tag:active {

                --ait-toolset-button-icon:
                    -moz-element(~"#ait-toolset-active-button-tag-icon");

            }

            & :-moz-any(#extractEventButton,
                        #extractTaskButton,
                        #button-getmsg,
                        #button-newmsg,
                        #button-print)
                .toolbarbutton-menubutton-button .toolbarbutton-icon,
            & .button-appmenu .toolbarbutton-icon[label="AppMenu"],
            & :-moz-any(
                #calendar-goto-today-button, #lightning-button-calendar,
                #calendar-synchronize-button, #task-synchronize-button,
                #calendar-newevent-button, #task-newevent-button,
                #calendar-newtask-button, #task-newtask-button,
                #calendar-delete-button, #task-delete-button,
                #calendar-print-button, #task-print-button,
                #calendar-edit-button, #task-edit-button,
                #calendar-unifinder-button,
                #lightning-button-tasks,
                #qfb-show-filter-bar,
                #button-address,
                #button-chat,
                #button-tag
            ) .toolbarbutton-icon {

                list-style-image: none;
                background-image: var(--ait-toolset-button-icon);

            }

        }

    }

}


//        &[labelalign="bottom"][mode="full"] {
//
//            --ait-toolbox-height: 50px;
//            --ait-toolbox-button-height: 40px;
//
//        }
//
//        & toolbar {
//
//            min-height: var(--ait-toolbox-height) !important;
//            margin: 0 var(--ait-toolbox-button-vertical-spacing-half) !important;
//
//        }
//
//        /* toolbox items styling */
//
//        & toolbarbutton {
//
//            min-width: 16px !important;
//            border: none !important;
//            background: none;
//            padding: 0 var(--ait-input-horizontal-padding);
//            outline: none !important;
//            box-shadow: none;
//            transition: none !important;
//            position: relative !important;
//
//        }
//
//        & .toolbarbutton-image {
//
//            width: 16px !important;
//            height: 16px !important;
//
//        }
//
//        & .toolbarbutton-text {
//
//            font-size: var(--ait-input-font-size);
//            padding-left: var(--ait-input-text-vertical-spacing) !important;
//            color: var(--ait-btn-content-color) !important;
//            max-height: 1em;
//
//        }
//
//        & menulist,
//        & toolbaritem > toolbarbutton,
//        & toolbar > toolbarbutton {
//
//            margin: var(--ait-toolbox-button-vertical-spacing)
//                    var(--ait-toolbox-button-vertical-spacing-half) !important;
//
//        }
//
//        & menulist,
//        & toolbaritem toolbarbutton,
//        & toolbar > toolbarbutton {
//
//            min-height: var(--ait-toolbox-button-height);
//            box-shadow: inset 0 0 0 1px rgba(0,0,0,0) !important;
//            transition: background 200ms ease-out,
//                        box-shadow 200ms ease-out !important;
//            border-radius: var(--ait-input-border-radius);
//
//        }
//
//        & menulist {
//
//            border: none;
//
//        }
//
//        & .menulist-label-box {
//
//            background: none;
//            padding: 0;
//
//        }
//
//        & .menulist-label-box::after {
//
//            content: "";
//            display: inline-block;
//            width: 16px;
//            height: 16px;
//            background-image: -moz-element(~"#ait-down-icon");
//
//        }
//
//        & menulist[open="true"] .menulist-label-box::after {
//
//            background-image: -moz-element(~"#ait-down-active-icon");
//
//        }
//
//        & *[disabled="true"] {
//
//            pointer-events: none;
//
//        }
//
//        & toolbaritem menulist,
//        & toolbar toolbaritem toolbarbutton:hover,
//        & toolbar >
//            toolbarbutton:not([disabled="true"]):not([type="menu-button"]):hover {
//
//            background: var(--ait-btn-color);
//            box-shadow: inset 0 0 0 1px var(--ait-btn-border-color) !important;
//
//        }
//
//        & toolbaritem menulist:hover {
//
//            background: var(--ait-btn-hover-color) !important;
//
//        }
//
//        & toolbaritem menulist[open="true"],
//        & toolbar toolbaritem toolbarbutton:active,
//        & toolbar >
//            toolbarbutton:not([disabled="true"]):not([type="menu-button"]) {
//
//            &:active,
//            &[open="true"],
//            &[checked="true"] {
//
//                background: var(--ait-btn-active-color) !important;
//                box-shadow: none !important;
//                transition: none !important;
//
//            }
//
//        }
//
//        & toolbaritem menulist[open="true"],
//        & toolbarbutton:not([type="menu-button"]) {
//
//            &:active,
//            &[open="true"],
//            &[checked="true"] {
//
//                & .toolbarbutton-text {
//
//                    color: white !important;
//
//                }
//
//            }
//
//        }
//
//        & .toolbarbutton-menubutton-button,
//        & .toolbarbutton-menubutton-dropmarker {
//
//            background: rgba(0,0,0,0);
//            border-top: 1px solid var(--ait-btn-border-color) !important;
//            border-bottom: 1px solid var(--ait-btn-border-color) !important;
//            box-shadow: none !important;
//            min-height: var(--ait-toolbox-button-height);
//
//        }
//
//        & .toolbarbutton-menubutton-button {
//
//            border-top-left-radius: var(--ait-input-border-radius);
//            border-bottom-left-radius: var(--ait-input-border-radius);
//            border-left: 1px solid var(--ait-btn-border-color) !important;
//            transition: background 300ms ease !important;
//            padding-right: calc(var(--ait-input-horizontal-padding) + 1px);
//
//        }
//
//        & .toolbarbutton-menubutton-dropmarker {
//
//            border-top-right-radius: var(--ait-input-border-radius);
//            border-bottom-right-radius: var(--ait-input-border-radius);
//            border-right: 1px solid var(--ait-btn-border-color) !important;
//            background: none !important;
//            z-index: 2;
//            position: relative;
//            box-shadow: -1px 0 rgba(0,0,0,0) !important;
//            transition: background 300ms ease,
//                        box-shadow 300ms ease !important;
//
//        }
//
//        & toolbarbutton {
//
//            & image {
//
//                width: 16px !important;
//                height: 16px !important;
//
//            }
//
//            &:hover .toolbarbutton-menubutton-dropmarker {
//
//                box-shadow: -1px 0 var(--ait-btn-border-color) !important;
//
//            }
//
//            &:not(:active) .toolbarbutton-menubutton-button:hover,
//            &:not([open="true"]):hover
//                .toolbarbutton-menubutton-button:not(:hover) +
//                    .toolbarbutton-menubutton-dropmarker {
//
//                background: var(--ait-btn-hover-color) !important;
//
//            }
//
//            &[type="menu-button"] {
//
//                background: var(--ait-btn-color) !important;
//
//                & toolbarbutton:active,
//                & dropmarker[open="true"] {
//
//                    background: var(--ait-btn-active-color) !important;
//                    transition: none !important;
//                    border-color: var(--ait-btn-active-color) !important;
//
//                }
//
//                & dropmarker::before {
//
//                    display: none !important;
//
//                }
//
//                & .dropmarker-icon {
//
//                    max-width: 16px !important;
//                    max-height: 16px !important;
//                    margin: calc((var(--ait-toolbox-button-height) - 16px) / 2)
//                            calc(var(--ait-input-horizontal-padding) - 3px)
//                            !important;
//
//                }
//
//            }
//
//            &[type="menu-button"] dropmarker[open="true"],
//            &[type="menu"][open="true"] {
//
//                & .dropmarker-icon {
//
//                    background-image: -moz-element(~"#ait-down-active-icon")
//                                !important;
//
//                }
//
//            }
//
//        }
//
//        & dropmarker {
//
//            -moz-appearance: none;
//
//            & .dropmarker-icon {
//
//                list-style-image: none;
//                background-image: -moz-element(~"#ait-down-icon") !important;
//
//            }
//
//        }
//
//        & toolbarseparator {
//
//            -moz-appearance: none !important;
//            margin: 0 3px !important;
//            min-width: 1px;
//            height: var(--ait-toolbox-height);
//            background: var(--ait-border-color);
//
//        }
//
//        /* toolbox menu popups styling */
//
//        & toolbar > toolbarbutton > menupopup {
//
//            -moz-appearance: none !important;
//            background: transparent !important;
//            overflow: hidden;
//            border-radius: 5px;
//            margin: 0 -3px;
//
//            & > .popup-internal-box {
//
//                background: white;
//                margin: 3px;
//                box-shadow: 0 0 3px rgba(0,0,0,0.125);
//                border-radius: 5px;
//                overflow: hidden !important;
//                border: 1px solid var(--ait-border-color);
//
//            }
//
//        }
//

/* -- text boxes ------------------------------------------------------------ */

:root {

    &#messengerWindow[ait-mails-main-view-preference="light"] #messengerBox,
    &#addressbookWindow[ait-frame-contents-preference="light"],
    &#messengerWindow[ait-lightning-side-pane-preference="light"]
        #today-pane-panel,
    &#messengerWindow[ait-lightning-main-view-preference="light"]
        #calendarContent,
    &#messengerWindow:-moz-any([ait-main-toolbox-preference="light"],
                               [ait-main-toolbox-preference="darker"]),
        .mail-toolbox {

        --ait-input-border-color: var(--ait-light-input-border-color);

        --ait-input-background-color:
            var(--ait-light-content-background-color);

        & textbox {

            transition: border-color 100ms linear;

            &[focused="true"] {

                border-color: var(--ait-blue) !important;

            }

        }

    }

    &#messengerWindow[ait-mails-main-view-preference="dark"] #messengerBox,
    &#messengerWindow[ait-main-toolbox-preference="dark"] .mail-toolbox,
    &#addressbookWindow[ait-frame-contents-preference="dark"],
    &#messengerWindow[ait-lightning-side-pane-preference="dark"]
        #today-pane-panel,
    &#messengerWindow[ait-lightning-main-view-preference="dark"]
        #calendarContent {

        --ait-input-border-color: var(--ait-dark-input-border-color);

        --ait-input-background-color:
            var(--ait-dark-content-background-color);

        & textbox {

            transition: box-shadow 100ms linear;
            box-shadow: inset 0 0 0 1px transparent;

            &[focused="true"] {

                box-shadow: inset 0 0 0 1px var(--ait-blue);

            }

        }


    }

    &#messengerWindow:not([ait-main-toolbox-preference="none"]) .mail-toolbox {

        --ait-searchbox-search-icon:
            -moz-element(~"#ait-pane-toolset-searchbox-search-icon");

        & .gloda-search-icon {

            margin: 3px;
            width: 16px;
            height: 16px;
            list-style-image: none;
            background-size: contain;
            background-repeat: no-repeat;
            background-image: var(--ait-searchbox-search-icon);

        }

    }

    &#messengerWindow:not([ait-main-toolbox-preference="none"])
        #messengerBox {

        --ait-searchbox-search-icon:
            -moz-element(~"#ait-mails-view-searchbox-search-icon");

    }

    &#addressbookWindow:not([ait-frame-contents-preference="none"]) {

        --ait-searchbox-search-icon:
            -moz-element(~"#ait-toolset-searchbox-search-icon");

    }

    &#messengerWindow:not([ait-lightning-main-view-preference="none"])
        #calendarContent {

        --ait-searchbox-search-icon:
            -moz-element(~"#ait-lightning-main-view-searchbox-search-icon");

    }

    &#addressbookWindow:not([ait-frame-contents-preference="none"]) .toolbox-top,
    &#messengerWindow:not([ait-main-toolbox-preference="none"]) .mail-toolbox,
    &#messengerWindow:not([ait-lightning-side-pane-preference="none"])
        #today-pane-panel,
    &#messengerWindow:not([ait-lightning-main-view-preference="none"])
        #calendarContent,
    &#messengerWindow:not([ait-mails-main-view-preference="none"])
        #messengerBox {

        & textbox {

            -moz-appearance: none;
            height: var(--ait-input-height);
            background: var(--ait-input-background-color);
            border: 1px solid var(--ait-input-border-color);
            border-radius: var(--ait-input-border-radius) !important;

            &:not(.searchBox):not([focused="true"]) input {

                opacity: 0.5

            }

        }

        & .searchBox {

            position: relative;
            border-radius: 1em !important;
            padding: 0 var(--ait-input-horizontal-padding);
            padding-left: calc(var(--ait-input-horizontal-padding) * 2 + 16px);

            & > hbox:last-child,
            & .textbox-search-icons {

                display: none;

            }

            &::before {

                top: 50%;
                content: "";
                width: 16px;
                height: 16px;
                display: block;
                position: absolute;
                transform: translateY(-50%);
                left: var(--ait-input-horizontal-padding);
                margin-right: var(--ait-input-horizontal-padding);
                background-image: var(--ait-searchbox-search-icon);

            }

        }

    }

}

/* -- lightning main view --------------------------------------------------- */

:root#messengerWindow {

    &[ait-lightning-main-view-preference="light"] {

        --ait-lightning-view-text-color: var(--ait-light-text-color);
        --ait-lightning-view-button-active-border-color: var(--ait-blue);

        --ait-lightning-view-actions-box-border-color:
            var(--ait-light-pane-border-color);

        --ait-lightning-view-input-borer-color:
            var(--ait-light-input-border-color);

        --ait-lightning-view-button-background-color:
            var(--ait-light-button-background-color);

        --ait-lightning-view-content-background-color:
            var(--ait-light-content-background-color);

        --ait-lightning-view-actions-box-background-color:
            var(--ait-light-actions-box-background-color);

        --ait-lightning-view-button-hover-background-color:
            var(--ait-light-button-hover-background-color);

    }

    &[ait-lightning-main-view-preference="dark"] {

        --ait-lightning-view-text-color: var(--ait-dark-text-color);

        --ait-lightning-view-actions-box-border-color:
            var(--ait-dark-pane-border-color);

        --ait-lightning-view-input-borer-color:
            var(--ait-dark-input-border-color);

        --ait-lightning-view-button-active-border-color:
            var(--ait-dark-input-border-color);

        --ait-lightning-view-button-background-color:
            var(--ait-dark-button-background-color);

        --ait-lightning-view-content-background-color:
            var(--ait-dark-content-background-color);

        --ait-lightning-view-actions-box-background-color:
            var(--ait-dark-actions-box-background-color);

        --ait-lightning-view-button-hover-background-color:
            var(--ait-dark-button-hover-background-color);

    }

    &:not([ait-lightning-main-view-preference="none"]) {

        & #calendar-view-box {

            position: relative;
            padding-bottom:
                calc(var(--ait-actions-box-height) -
                     (1px / var(--ait-pixel-ratio)));

        }

        & #view-tabbox {

            position: absolute;
            width: 100%;
            bottom: 0;
            height: var(--ait-actions-box-height);
            text-align: center;

            border-top:
                1px solid
                var(--ait-lightning-view-actions-box-border-color);

            border-bottom:
                1px solid
                var(--ait-lightning-view-actions-box-border-color);

            background:
                var(--ait-lightning-view-actions-box-background-color);

            & .navigation-bottombox {

                display: none;

            }

        }

        & #calendar-nav-control {

            background: var(--ait-lightning-view-content-background-color);
            border: none;

            & .navigation-inner-box {

                border: none;

            }

            & :-moz-any(.navigation-spacer-box, .navigation-bottombox) {

                display: none;

            }

            & label {

                font-size: 1.1em;
                font-weight: bold;
                color: var(--ait-lightning-view-text-color);

            }

        }

        & calendar-day-label {

            background: var(--ait-lightning-view-content-background-color);
            border-left: none;
            text-transform: uppercase;
            font-size: 0.9em;
            text-align: left;
            display: block;

            & label {

                margin-top: 6px;
                margin-bottom: 6px;
                color: var(--ait-lightning-view-text-color);

                &:not([hidden="true"]) {

                    display: inline-block;

                }

            }

        }

        & :-moz-any(calendar-month-view, calendar-multiweek-view)
            [anonid="mainbox"] {

            margin-right: 1px;

        }

        & calendar-month-day-box {

            display: flex;
            flex-flow: column;

            & [anonid="monthday-labels"] {

                display: flex;
                flex-flow: row;
                order: 1;
                padding: 6px;

                & > * {

                    flex: 1;
                    display: block;
                    background: none;

                }

            }

            & .calendar-month-day-box-items-box {

                flex: 1 100%;

            }

        }

        & :-moz-any(.calendar-color-box, calendar-event-box) {

            background-image: none;
            border: none !important;
            margin-left: 1px;
            text-align: center;

        }

        & #intervalDescription {

            color: var(--ait-blue) !important;

        }

        & #calendarWeek {

            opacity: 0.5;

        }

        & #view-deck {

            border: none;

            & > * {

                padding: 0;

                & :-moz-any(.labeldaybox-container,
                            .multiday-view-label-day-box) {

                    border-top: none;

                }

            }

            & * {

                border-width: calc(1px / var(--ait-pixel-ratio)) !important;
                border-color: var(--ait-border-color) !important;

            }

        }

        & #view-tabs {

            display: inline-flex;
            height: 100%;
            width: 100%;
            margin: var(--ait-actions-box-input-margin);

            &:before,
            &:after {

                content: "";
                display: inline-block;
                flex: 2;

            }

            & > tab {

                flex: 1;
                margin: 0;
                padding: 0;
                border-radius: 0;
                display: inline-block;
                height: calc(var(--ait-input-height) - 2px);
                background: var(--ait-lightning-view-button-background-color);
                transition: background 200ms ease-out,
                            box-shadow 200ms ease-out;
                border: 1px solid
                        var(--ait-lightning-view-input-borer-color);


                &:not([first-tab="true"]) {

                    border-left: 0;
                    padding-left: 1px;

                }

                &[first-tab="true"] {

                    border-top-left-radius: var(--ait-input-border-radius);
                    border-bottom-left-radius: var(--ait-input-border-radius);

                }

                &:not([last-tab="true"]) {

                    border-right: 0;

                }

                &[last-tab="true"] {

                    border-top-right-radius: var(--ait-input-border-radius);
                    border-bottom-right-radius: var(--ait-input-border-radius);

                }

                &:hover {

                    background:
                        var(--ait-lightning-view-button-hover-background-color);

                    &:not([first-tab="true"]),
                    & + tab {

                        box-shadow:
                            inset 1px 0
                            var(--ait-lightning-view-input-borer-color);

                    }

                }

                &:-moz-any([selected="true"], :active) {

                    transition: none;
                    background: var(--ait-blue);

                    border-color:
                        var(--ait-lightning-view-button-active-border-color);

                    & label {

                        transition: none;
                        color: var(--ait-button-active-text-color);

                    }

                    &:not([first-tab="true"]),
                    & + tab {

                        box-shadow: none !important;

                    }

                }

                & label {

                    font-weight: normal;
                    margin: 0 1em !important;
                    transition: color 200ms ease-out;
                    color: var(--ait-lightning-view-text-color);

                }

            }

        }

    }

}

/* -- lightning side pane --------------------------------------------------- */

:root#messengerWindow {

    &[ait-lightning-side-pane-preference="light"] {

        --ait-lightning-side-pane-background-color:
            var(--ait-light-pane-background-color);

    }

    &[ait-lightning-side-pane-preference="dark"] {

        --ait-lightning-side-pane-background-color:
            var(--ait-dark-pane-background-color);

    }

    &:not([ait-lightning-side-pane-preference="none"]) {

        & #today-pane-panel,
        & #today-pane-panel sidebarheader {

            background: var(--ait-lightning-side-pane-background-color);

        }

        & #today-pane-panel {

            position: relative;
            //box-shadow: -1px -1px var(--ait-border-color);

            & sidebarheader {

                font-weight: bold;
                margin: 0.5em 0.5em 0.5em 0;

            }

        }

        & #calendar-task-tree-detail {

            margin: 3px;
            display: flex;
            overflow: hidden;
            flex-flow: column;
            border: 1px solid var(--ait-border-color);
            border-radius: var(--ait-input-border-radius);
            background: var(--ait-actions-box-background-color);

        }

        & #unifinder-todo-tree {

            flex: 1;

            & tree {

                width: 100%;
                height: 100%;

            }

            & .calendar-task-tree {

                border-bottom: 1px solid var(--ait-border-color);

            }

        }

        & #unifinder-task-edit-field {

            margin: var(--ait-actions-box-input-margin);

        }

        & #folderview-cycler-prev .toolbarbutton-icon {

            width: 16px;
            height: 16px;
            list-style-image: none;
            transform: rotate(90deg);

            background-image:
                -moz-element(~"#ait-lightning-side-pane-down-arrow-icon");

        }

        & #folderview-cycler-next .toolbarbutton-icon {

            width: 16px;
            height: 16px;
            list-style-image: none;
            transform: rotate(-90deg);

            background-image:
                -moz-element(~"#ait-lightning-side-pane-down-arrow-icon");

        }

    }

}
